<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <!-- If true, .Net remoting will be used as the communication mechanism. Otherwise WCF is used. -->
    <add key="UseRemoting" value="false" />

    <!--Specify discovery service to look up pubsuite urls, comment out to turn off discovery lookup-->
    <add key="DiscoveryService" value="https://prodpubsuitediscovery.trafficmanager.net/api" />

    <!-- Authentication values used for Azure Active Directory -->
    <add key="ida:AADInstance" value="https://login.microsoftonline.com/{0}" />
    <add key="ida:Tenant" value="microsoft.onmicrosoft.com" />
    <add key="ida:ClientId" value="7c26b3bb-b7fc-4f3d-89e1-bf54a949479e"/>
    <add key="ida:RedirectUri" value="https://PubsuiteClient" />
    <add key="ResourceOverride" value="https://pubsuite.corp.microsoft.com"/>
    <add key="MaxWaitTimeForEvents" value="00:00:10"/>

    <!-- Authentication values used for MU AAD Auth -->
    <add key="MuClientId" value=""/>
    <add key="MuClientCertName" value=""/>
  </appSettings>

  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="PublishingUpdateBinding"
                 closeTimeout="00:10:00"
                 openTimeout="00:10:00"
                 receiveTimeout="00:10:00"
                 sendTimeout="01:00:00"
                 maxReceivedMessageSize="200000000"
                 maxBufferSize="200000000"
                 maxBufferPoolSize="134217728"
                 messageEncoding="Text"
                 textEncoding="utf-8">
          <readerQuotas maxDepth="32"
                        maxStringContentLength="20000000"
                        maxArrayLength="16384"
                        maxBytesPerRead="4096"
                        maxNameTableCharCount="16384" />
          <security mode="Transport">
            <transport clientCredentialType="Ntlm"/>
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="https://localhost/CupsWebService/PublishingUpdate.svc"
                binding="basicHttpBinding"
                bindingConfiguration="PublishingUpdateBinding"
                contract="Microsoft.UpdateServices.Publishing.IPublishingUpdate"
                name="PublishingUpdate">
        <identity>
          <servicePrincipalName />
        </identity>
      </endpoint>
      <endpoint address="https://alternateserver/Publishing/PublishingUpdate.svc"
                binding="basicHttpBinding"
                bindingConfiguration="PublishingUpdateBinding"
                contract="Microsoft.UpdateServices.Publishing.IPublishingUpdate"
                name="PublishingUpdateAlternate">
        <identity>
          <servicePrincipalName />
        </identity>
      </endpoint>
    </client>
  </system.serviceModel>

  <system.runtime.remoting>
    <application>
      <channels>
        <channel name="PublishingChannel"
                 priority="25"
                 type="Microsoft.UpdateServices.Publishing.Client.BoundHttpChannel, Microsoft.UpdateServices.Publishing.ClientAgent"
                 addressMatch = "PublishingUpdate.rem"
                 ssl="true" useDefaultCredentials="true" port="0" timeout="600000">
          <serverProviders>
            <formatter ref="binary" typeFilterLevel="Full" />
          </serverProviders>
          <clientProviders>
            <formatter ref="binary" />
          </clientProviders>
        </channel>
      </channels>
      <client>
        <wellknown
            url="https://localhost/Publishing/PublishingUpdate.rem"
            type="Microsoft.UpdateServices.Publishing.IPublishingUpdate,Microsoft.UpdateServices.Publishing.Common" />
      </client>
    </application>
  </system.runtime.remoting>
</configuration>
